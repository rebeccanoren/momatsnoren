<script>
  import Header from "$lib/header/Header.svelte";
  import FlyingImage from "$lib/components/FlyingImage.svelte";
  import FlyingTwoImages from "$lib/components/FlyingTwoImages.svelte";
  import { onMount } from "svelte";
  import { startCountdown } from "$lib/countdowntimer.js";
  import { initBorderRadius } from "$lib/borderradius.js";
  import AnimatedText from "$lib/components/AnimatedText.svelte";

  let countdown = { days: 0, hours: 0, minutes: 0, seconds: 0, expired: false };
  let targetDate = new Date("August 9, 2025 13:00:00").getTime();

  onMount(() => {
    const stopCountdown = startCountdown(targetDate, (newCountdown) => {
      countdown = newCountdown;
    });

    const cleanupBorderRadius = initBorderRadius(); // Initialize border-radius effect for each section

    return () => {
      stopCountdown();
      cleanupBorderRadius();
    };
  });
</script>

<Header />

<section class="scrolling-slider beige secondary">
  <div class="content-wrapper beige">
    <div class="top-background border-radius yellow-background"></div>
    <div class="square-background yellow-background">
      <div class="content content-overlap">
        <FlyingTwoImages
          src1="rebecca.jpg"
          alt1="Rebecca"
          imageClass1="image"
          src2="henrik.jpg"
          alt2="Henrik och Rebecca"
          imageClass2="image"
        />

        <div class="text-wrapper">
          <AnimatedText
            title="Vi gifter oss!"
            content="Okej, vi erk√§nner ‚Äì det tog ett tag men som man s√§ger: l√•ngsamt byggs det b√§sta k√§rleksslottet (eller n√•got s√•nt). Efter att ha varit tillsammans i 10 √•r √§r det nu √§ntligen dags att knyta ihop s√§cken! Den 9 augusti 2025 g√∂r vi det officiellt p√• Koster√∂arna. Eftersom en dag inte r√§cker k√∂r vi p√• en hel br√∂llopshelg som ni inte vill missa. Vi lovar en helg fylld av k√§rlek, skratt och dans! H√§r hittar ni all info s√• att ni vet precis vad som h√§nder, n√§r det h√§nder och hur ni b√§st njuter av er tid."
            action1={{
              label: "Se hela helgens schema h√§r!",
              url: "/schema",
              className: "button-link light",
            }}
          />
        </div>
      </div>
    </div>
  </div>

  <div class="time-counter">
    {#if !countdown.expired}
      <h3>Nedr√§kningen har b√∂rjat...</h3>
      <p>
        {countdown.days} Dagar, {countdown.hours} Timmar, {countdown.minutes} Minuter,
        {countdown.seconds} Sekunder
      </p>
    {:else}
      <p>Vi √§r gifta ‚ù§Ô∏è‚Äçüî•</p>
    {/if}
  </div>

  <div class="content-wrapper dark-blue-background">
    <div class="top-background border-radius salmon-background"></div>
    <div class="square-background salmon-background">
      <div class="content content-overlap salmon-background">
        <div class="content-illustration">
          <FlyingImage
            src="rebecca-henrik-kajak.jpg"
            alt="Henrik och Rebecca paddlar kajak"
            imageClass="image"
          />
        </div>
        <div class="text-wrapper">
          <AnimatedText
            className="salmon"
            title="Varf√∂r Koster?"
            content="Det √§r en plats som √§r sv√•r att beskriva utan att l√•ta som en turistbroschyr ‚Äì naturreservat mitt i havet, fantastiska vyer och en k√§nsla av lugn som √§r sv√•r att hitta n√•gon annanstans. Bara en s√•dan sak!"
            content2="Henriks familj har en s√§rskild relation till Koster. I ungef√§r 50 √•r har de hyrt samma stuga, en riktig p√§rla utan vare sig toalett eller varmvatten. H√§r snackar vi att leva n√§ra naturen p√• riktigt ‚Äì duscha i havet och g√∂ra det b√§sta av situationen. Men det √§r just det som g√∂r Koster s√• magiskt. Det √§r en plats d√§r havsbrisen √§r det enda man beh√∂ver bry sig om."
            content3="Och eftersom Rebecca √§r fr√•n v√§stkusten blev det en sj√§lvklarhet. (Okej, hon hade en kort dr√∂m om att gifta sig p√• en ving√•rd i Frankrike men den skrotades r√§tt snabbt) N√§r det var dags att v√§lja plats f√∂r v√•rt br√∂llop fanns det bara ett alternativ. Koster √§r v√•r plats."
          />
        </div>
      </div>
    </div>
  </div>

  <div class="content-wrapper salmon-background">
    <div class="top-background border-radius yellow-background"></div>
    <div class="square-background yellow-background">
      <div class="content content-overlap">
        <div class="content-image">
          <FlyingImage
            src="henrikrebecca-2.jpg"
            alt="Henrik och Rebecca f√∂r m√•nga √•r sedan"
            imageClass="image"
          />
        </div>
        <div class="text-wrapper">
          <AnimatedText
            title="Hur allt b√∂rjade"
            content="F√∂rsta g√•ngen Rebecca bes√∂kte √∂n var 2017 eller kanske 2018? Det var i alla fall den sommaren d√• Henrik r√•kade ut f√∂r salmonella efter en tveksam kycklingsm√∂rg√•s ink√∂pt p√• en bensinstation i Portugal (rekommenderas inte!). Vi fl√∂g direkt fr√•n Portugal till Koster och Henrik l√•g d√§ckad, likblek och utslagen i √∂ver en vecka."
            content2="N√§r Henrik √§ntligen piggnade till fick vi uppt√§cka den magiska √∂n tillsammans. Bilden ni ser h√§r ovan √§r faktiskt fr√•n v√•r f√∂rsta resa till Koster, n√§r Henrik var tillbaka p√• f√∂tter. Trots den lite kaotiska starten har vi √•terv√§nt n√§stan varje √•r sedan dess."
            action1={{
              label: "Kommer du? OSA!",
              url: "/osa",
              className: "button-link light",
            }}
          />
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .time-counter {
    background-color: var(--dark-blue);
    color: var(--beige);
    width: 100%;
    padding: 100px 0;
    text-align: center;
  }
</style>
