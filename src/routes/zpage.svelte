<script>
	import Header from '$lib/header/Header.svelte';
	import FlyingSvg from '$lib/components/FlyingSvg.svelte';
	import { onMount } from 'svelte';
	import { startCountdown } from '$lib/countdowntimer.js';
	import { initBorderRadius } from '$lib/borderradius.js'; // Import the JavaScript function
	
	// State to hold countdown values
	let countdown = { days: 0, hours: 0, minutes: 0, seconds: 0, expired: false };
	let targetDate = new Date("August 9, 2025 13:00:00").getTime();
	
	// Start the countdown and border-radius effect when the component mounts
	onMount(() => {
	  const stopCountdown = startCountdown(targetDate, (newCountdown) => {
		countdown = newCountdown; // Update the countdown values reactively
	  });
  
	  // Initialize border-radius effect
	  const cleanupBorderRadius = initBorderRadius();
  
	  // Cleanup both the countdown and border-radius effect when the component is destroyed
	  return () => {
		stopCountdown();
		cleanupBorderRadius();
	  };
	});
  </script>
  
  <Header />
  
  <!-- Time Counter -->
  <div class="time-counter">
	{#if !countdown.expired}
	  <h3>Nedr√§kning...</h3>
	  <p>{countdown.days} Dagar, {countdown.hours} Timmar, {countdown.minutes} Minuter, {countdown.seconds} Sekunder</p>
	{:else}
	  <p>Vi √§r gifta ‚ù§Ô∏è‚Äçüî•</p>
	{/if}
  </div>
  
  <!-- Section 1 -->
  <div class="page-content salmon-background border-radius stack-section">
	<div class="primary-section">
	  <p>En K√§rlekssaga i Sk√§rg√•rden</p>
	  <h2 class="blue">
		Vi skulle bli √∂verlyckliga om du vill vara med och fira v√•r dag n√§r vi s√§ger ja till varandra
		och firar k√§rleken med alla v√•ra favoritpersoner ‚Äì inklusive dig!
	  </h2>
	  <p>
		Vi gifter oss p√• vackra Sydkoster i en liten kyrka mitt p√• √∂n. Efter√•t v√§ntar en h√§rlig middag
		p√• Eken√§s Havshotell och sedan fest p√• Kosters R√∂keri! Kom g√§rna redan p√• fredagskv√§llen f√∂r
		att h√§nga med oss innan den stora dagen p√• l√∂rdagen.
	  </p>
	</div>
  </div>
  
  <!-- Section 2 -->
  <div class="page-content white-background border-radius stack-section">
	<div class="primary-section">
	  <FlyingSvg src="ekenas.png" alt="Eken√§s Havshotell" />
	  <p>L√∂rdag, 13:00</p>
	  <h2 class="blue">Vigsel i Kosters Kyrka</h2>
	  <p>
		Vi gifter oss p√• vackra Sydkoster i en liten kyrka mitt p√• √∂n. Efter√•t v√§ntar en h√§rlig middag
		p√• Eken√§s Havshotell och sedan fest p√• Kosters R√∂keri! Kom g√§rna redan p√• fredagskv√§llen f√∂r
		att h√§nga med oss innan den stora dagen p√• l√∂rdagen.
	  </p>
	</div>
  </div>
  
  <!-- Section 3 -->
  <div class="page-content blue-background border-radius stack-section">
	<div class="primary-section">
	  <p>L√∂rdag, 13:00</p>
	  <h2 class="blue">Vigsel i Kosters Kyrka</h2>
	  <p>
		Vi gifter oss p√• vackra Sydkoster i en liten kyrka mitt p√• √∂n. Efter√•t v√§ntar en h√§rlig middag
		p√• Eken√§s Havshotell och sedan fest p√• Kosters R√∂keri! Kom g√§rna redan p√• fredagskv√§llen f√∂r
		att h√§nga med oss innan den stora dagen p√• l√∂rdagen.
	  </p>
	</div>
  </div>
  
  <style>
	.time-counter {
	  background-color: var(--dark-blue);
	  color: var(--beige);
	  width: 100%;
	  padding: 100px 0 100vh 0;
	  text-align: center;
	}
  
	.time-counter p {
	  text-align: center;
	}
  
	/* Ensure sections stack properly */
	.stack-section {
	  position: relative;
	  z-index: 1;
	  margin-top: -80vh;
	  padding-top: 100px;
	}
  
	/* Remove top margin for the first section */
	.stack-section:first-child {
	  margin-top: 0;
	}
  
	.page-content {
	  display: flex;
	  flex-direction: column;
	  align-items: center;
	  justify-content: center;
	  width: 100%;
	  padding: 30vh 0 100vh 0;
	  position: relative;
	  transition: border-radius 0.5s ease, background-color 0.5s ease;
	  z-index: 1; /* Ensure proper stacking */
	}
  
	.primary-section {
	  max-width: 500px;
	  margin: auto;
	  text-align: center;
	}
  
	.border-radius {
	  transition: border-radius 0.5s ease; /* Smooth transition for border-radius */
	}
  

  </style>
  